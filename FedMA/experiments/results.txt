experiment 1:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedma --comm_round=2 --retrain=False --rematching=True

SGD optimizer

mnist train_size: 2000 test_size:500

before matching
INFO:root:Computing Uniform ensemble accuracy
INFO:root:Uniform ensemble (Train acc): 0.874
INFO:root:Uniform ensemble (Test acc): 0.784


INFO:root:Accuracy for Neural Matching correct: 406, total: 500
INFO:root:Accuracy for Fed Averaging correct: 172, total: 500



after 2 comm rounds
INFO:root:>> Pre-Training Training accuracy: 0.969903
INFO:root:>> Pre-Training Test accuracy: 0.838000
INFO:root:>> Training accuracy after local retrain: 0.979612
INFO:root:>> Test accuracy after local retrain: 0.824000
INFO:root:After retraining and rematching for comm. round: 1, we measure the accuracy ...
INFO:root:Accuracy for Neural Matching correct: 441, total: 500


experiment 2:
python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedavg --comm_round=2 --retrain=False --rematching=True

SGD optimizer

mnist train_size: 2000 test_size:500

INFO:root:>> Pre-Training Training accuracy: 0.849515
INFO:root:>> Pre-Training Test accuracy: 0.718000
INFO:root:>> Training accuracy after local retrain: 0.964078
INFO:root:>> Test accuracy after local retrain: 0.770000
INFO:root:Accuracy for Neural Matching correct: 407, total: 500


experiment 3:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedma --comm_round=1 --retrain=False --rematching=True
SGD optimizer

INFO:root:>> Pre-Training Training accuracy: 0.937864
INFO:root:>> Pre-Training Test accuracy: 0.794000
INFO:root:>> Training accuracy after local retrain: 0.940777
INFO:root:>> Test accuracy after local retrain: 0.770000
INFO:root:After retraining and rematching for comm. round: 0, we measure the accuracy ...
INFO:root:Accuracy for Neural Matching correct: 429, total: 500


experiment 4:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedavg --comm_round=1 --retrain=False --rematching=True
SGD optimizer

INFO:root:>> Pre-Training Training accuracy: 0.371845
INFO:root:>> Pre-Training Test accuracy: 0.344000
INFO:root:>> Training accuracy after local retrain: 0.938835
INFO:root:>> Test accuracy after local retrain: 0.690000
INFO:root:Accuracy for Neural Matching correct: 359, total: 500

experiment 5:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedma --comm_round=5 --retrain=False --rematching=True
SGD optimizer

INFO:root:>> Pre-Training Training accuracy: 0.974757
INFO:root:>> Pre-Training Test accuracy: 0.862000
INFO:root:>> Training accuracy after local retrain: 0.979612
INFO:root:>> Test accuracy after local retrain: 0.856000
INFO:root:After retraining and rematching for comm. round: 4, we measure the accuracy ...
INFO:root:Accuracy for Neural Matching correct: 445, total: 500

experiment 6:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedavg --comm_round=5 --retrain=False --rematching=True
SGD optimizer

INFO:root:>> Pre-Training Training accuracy: 0.966990
INFO:root:>> Pre-Training Test accuracy: 0.864000
INFO:root:>> Training accuracy after local retrain: 1.000000
INFO:root:>> Test accuracy after local retrain: 0.822000
INFO:root:Accuracy for Neural Matching correct: 433, total: 500

experiment 7:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedma --comm_round=10 --retrain=False --rematching=True
SGD optimizer

INFO:root:>> Pre-Training Training accuracy: 0.988350
INFO:root:>> Pre-Training Test accuracy: 0.886000
INFO:root:>> Training accuracy after local retrain: 0.992233
INFO:root:>> Test accuracy after local retrain: 0.878000
INFO:root:After retraining and rematching for comm. round: 9, we measure the accuracy ...
INFO:root:Accuracy for Neural Matching correct: 448, total: 500


experiment 8:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedavg --comm_round=10 --retrain=False --rematching=True

SGD optimizer

INFO:root:>> Pre-Training Training accuracy: 0.991262
INFO:root:>> Pre-Training Test accuracy: 0.868000
INFO:root:>> Training accuracy after local retrain: 1.000000
INFO:root:>> Test accuracy after local retrain: 0.836000
INFO:root:Accuracy for Neural Matching correct: 435, total: 500

experiment 9:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedma --comm_round=20 --retrain=False --rematching=True

SGD optimizer

INFO:root:>> Pre-Training Training accuracy: 0.979612
INFO:root:>> Pre-Training Test accuracy: 0.876000
INFO:root:>> Training accuracy after local retrain: 0.982524
INFO:root:>> Test accuracy after local retrain: 0.874000
INFO:root:After retraining and rematching for comm. round: 19, we measure the accuracy ...
INFO:root:Accuracy for Neural Matching correct: 439, total: 500


experiment 10:

SGD optimizer

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedavg --comm_round=20 --retrain=False --rematching=True

INFO:root:>> Pre-Training Training accuracy: 1.000000
INFO:root:>> Pre-Training Test accuracy: 0.882000
INFO:root:>> Training accuracy after local retrain: 1.000000
INFO:root:>> Test accuracy after local retrain: 0.874000
INFO:root:Accuracy for Neural Matching correct: 439, total: 500


experiment 11:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedma --comm_round=2 --retrain=False --rematching=True
Adam Optimizer


INFO:root:Computing Uniform ensemble accuracy
INFO:root:Uniform ensemble (Train acc): 0.9095
INFO:root:Uniform ensemble (Test acc): 0.836


INFO:root:Accuracy for Neural Matching correct: 426, total: 500
INFO:root:Accuracy for Fed Averaging correct: 50, total: 500



INFO:root:>> Pre-Training Training accuracy: 0.969903
INFO:root:>> Pre-Training Test accuracy: 0.824000
INFO:root:>> Training accuracy after local retrain: 0.979612
INFO:root:>> Test accuracy after local retrain: 0.814000
INFO:root:After retraining and rematching for comm. round: 1, we measure the accuracy ...
INFO:root:Accuracy for Neural Matching correct: 432, total: 500


experiment 12:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedavg --comm_round=2 --retrain=False --rematching=True
Adam Optimizer


INFO:root:>> Pre-Training Training accuracy: 0.791262
INFO:root:>> Pre-Training Test accuracy: 0.622000
INFO:root:>> Training accuracy after local retrain: 0.965049
INFO:root:>> Test accuracy after local retrain: 0.718000
INFO:root:Accuracy for Neural Matching correct: 414, total: 500


experiment 13:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedma --comm_round=1 --retrain=False --rematching=True
Adam Optimizer

INFO:root:>> Pre-Training Training accuracy: 0.960194
INFO:root:>> Pre-Training Test accuracy: 0.714000
INFO:root:>> Training accuracy after local retrain: 0.978641
INFO:root:>> Test accuracy after local retrain: 0.794000
INFO:root:After retraining and rematching for comm. round: 0, we measure the accuracy ...
INFO:root:Accuracy for Neural Matching correct: 425, total: 500


experiment 14:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedavg --comm_round=1 --retrain=False --rematching=True
optimizer Adam

INFO:root:>> Pre-Training Training accuracy: 0.073786
INFO:root:>> Pre-Training Test accuracy: 0.100000
INFO:root:>> Training accuracy after local retrain: 0.968932
INFO:root:>> Test accuracy after local retrain: 0.722000
INFO:root:Accuracy for Neural Matching correct: 311, total: 500


experiment 15:
python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedma --comm_round=5 --retrain=False --rematching=True
optimizer Adam

INFO:root:>> Pre-Training Training accuracy: 0.950485
INFO:root:>> Pre-Training Test accuracy: 0.774000
INFO:root:>> Training accuracy after local retrain: 0.974757
INFO:root:>> Test accuracy after local retrain: 0.760000
INFO:root:After retraining and rematching for comm. round: 4, we measure the accuracy ...
INFO:root:Accuracy for Neural Matching correct: 415, total: 500

experiment 16:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedavg --comm_round=5 --retrain=False --rematching=True
optimizer Adam

INFO:root:>> Pre-Training Training accuracy: 0.930097
INFO:root:>> Pre-Training Test accuracy: 0.826000
INFO:root:>> Training accuracy after local retrain: 0.989320
INFO:root:>> Test accuracy after local retrain: 0.774000
INFO:root:Accuracy for Neural Matching correct: 418, total: 500

experiment 17:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedma --comm_round=10 --retrain=False --rematching=True
optimizer Adam

INFO:root:>> Pre-Training Training accuracy: 0.930097
INFO:root:>> Pre-Training Test accuracy: 0.812000
INFO:root:>> Training accuracy after local retrain: 0.948544
INFO:root:>> Test accuracy after local retrain: 0.802000
INFO:root:After retraining and rematching for comm. round: 9, we measure the accuracy ...
INFO:root:Accuracy for Neural Matching correct: 411, total: 500


experiment 18:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedavg --comm_round=10 --retrain=False --rematching=True
optimizer Adam

INFO:root:>> Pre-Training Training accuracy: 0.945631
INFO:root:>> Pre-Training Test accuracy: 0.778000
INFO:root:>> Training accuracy after local retrain: 0.979612
INFO:root:>> Test accuracy after local retrain: 0.770000
INFO:root:Accuracy for Neural Matching correct: 423, total: 500


experiment 19:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedma --comm_round=20 --retrain=False --rematching=True
optimizer Adam

INFO:root:>> Pre-Training Training accuracy: 0.904854
INFO:root:>> Pre-Training Test accuracy: 0.724000
INFO:root:>> Training accuracy after local retrain: 0.918447
INFO:root:>> Test accuracy after local retrain: 0.722000
INFO:root:After retraining and rematching for comm. round: 19, we measure the accuracy ...
INFO:root:Accuracy for Neural Matching correct: 405, total: 500


experiment 20:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=2 --partition=hetero-dir --comm_type=fedavg --comm_round=20 --retrain=False --rematching=True
optimizer Adam

INFO:root:>> Pre-Training Training accuracy: 0.966019
INFO:root:>> Pre-Training Test accuracy: 0.850000
INFO:root:>> Training accuracy after local retrain: 0.951456
INFO:root:>> Test accuracy after local retrain: 0.738000
INFO:root:Accuracy for Neural Matching correct: 412, total: 500


experiment 21:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=5 --partition=hetero-dir --comm_type=fedma --comm_round=1 --retrain=False --rematching=True
optimizer SGD

INFO:root:Computing Uniform ensemble accuracy
INFO:root:Uniform ensemble (Train acc): 0.7595
INFO:root:Uniform ensemble (Test acc): 0.678

Accuracy for Neural Matching correct: 318, total: 500
INFO:root:Accuracy for Fed Averaging correct: 67, total: 500


INFO:root:>> Pre-Training Training accuracy: 0.912458
INFO:root:>> Pre-Training Test accuracy: 0.646000
INFO:root:>> Training accuracy after local retrain: 0.905724
INFO:root:>> Test accuracy after local retrain: 0.604000
INFO:root:After retraining and rematching for comm. round: 0, we measure the accuracy ...
INFO:root:Accuracy for Neural Matching correct: 347, total: 500


experiment 22:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=5 --partition=hetero-dir --comm_type=fedavg --comm_round=1 --retrain=False --rematching=True
optimizer SGD

INFO:root:Computing Uniform ensemble accuracy
INFO:root:Uniform ensemble (Train acc): 0.7595
INFO:root:Uniform ensemble (Test acc): 0.678

Accuracy for Neural Matching correct: 318, total: 500
INFO:root:Accuracy for Fed Averaging correct: 67, total: 500

INFO:root:>> Pre-Training Training accuracy: 0.228956
INFO:root:>> Pre-Training Test accuracy: 0.134000
INFO:root:>> Training accuracy after local retrain: 0.518519
INFO:root:>> Test accuracy after local retrain: 0.214000
INFO:root:Accuracy for Neural Matching correct: 120, total: 500


experiment 23:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=10 --partition=hetero-dir --comm_type=fedma --comm_round=1 --retrain=False --rematching=True
optimizer SGD
train_size 6000

INFO:root:Computing Uniform ensemble accuracy
INFO:root:Uniform ensemble (Train acc): 0.3983333333333333
INFO:root:Uniform ensemble (Test acc): 0.418

INFO:root:Accuracy for Neural Matching correct: 79, total: 500
INFO:root:Accuracy for Fed Averaging correct: 43, total: 500

INFO:root:>> Pre-Training Training accuracy: 0.704797
INFO:root:>> Pre-Training Test accuracy: 0.236000
INFO:root:>> Training accuracy after local retrain: 0.690037
INFO:root:>> Test accuracy after local retrain: 0.202000
INFO:root:After retraining and rematching for comm. round: 0, we measure the accuracy ...
INFO:root:Accuracy for Neural Matching correct: 129, total: 500

experiment 24:

python main.py --model=simple-cnn --dataset=mnist --lr=0.01 --retrain_lr=0.01 --batch-size=64 --epochs=10 --retrain_epochs=10 --n_nets=10 --partition=hetero-dir --comm_type=fedavg --comm_round=1 --retrain=False --rematching=True
optimizer SGD
train_size 6000


INFO:root:Computing Uniform ensemble accuracy
INFO:root:Uniform ensemble (Train acc): 0.3983333333333333
INFO:root:Uniform ensemble (Test acc): 0.418

INFO:root:Accuracy for Neural Matching correct: 79, total: 500
INFO:root:Accuracy for Fed Averaging correct: 43, total: 500

INFO:root:>> Pre-Training Training accuracy: 0.265683
INFO:root:>> Pre-Training Test accuracy: 0.086000
INFO:root:>> Training accuracy after local retrain: 0.431734
INFO:root:>> Test accuracy after local retrain: 0.108000
INFO:root:Accuracy for Neural Matching correct: 43, total: 500

